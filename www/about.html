<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Imeter Stats</title>
  <!-- Tell the browser to be responsive to screen width -->
    <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
  <!-- Bootstrap 3.3.5 -->
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="css/ionicons.min.css">
  
  <link rel="stylesheet" href="plugins/ionslider/ion.rangeSlider.css">
  <!-- ion slider Nice -->
  <link rel="stylesheet" href="plugins/ionslider/ion.rangeSlider.skinNice.css">
  <!-- bootstrap slider -->
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

   <header class="main-header" style='position:fixed'>

    <!-- Logo -->
    <div class="logo" style='background:white;padding :15px 0'>
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <span class="logo-mini"><b>i</b>Mt</span>
      <!-- logo for regular state and mobile devices -->
      <img src='images/imeter.jpg' style='width:53%;display:block;margin: auto' class="logo-lg"/>
    </div>

    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top" role="navigation">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>
      <!-- Navbar Right Menu -->
      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <!-- Messages: style can be found in dropdown.less-->
           <!-- Notifications: style can be found in dropdown.less -->
          <!-- Tasks: style can be found in dropdown.less -->
          <!-- User Account: style can be found in dropdown.less -->
          <li class="dropdown user user-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
              <span class="name_holder hidden-xs" >Customer Name</span>
            </a>
            <ul class="dropdown-menu">
              <!-- User image -->
              <li class="user-header">
                <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">

                <p>
                <span class='name_holder'> Customer Name</span> 
                  <small id='date_holder'>Member since Nov. 2012</small>
                </p>
              </li>
              <!-- Menu Body -->
              <!-- Menu Footer-->
              <li class="user-footer">
			   <div class="pull-left">		
                  <a href="#" onclick='capturePhoto()' class="btn btn-default btn-flat">Picture</a>
                </div>
                <div class="pull-right">
                  <a href="index.html"  class="btn btn-default btn-flat">Sign out</a>
                </div>
              </li>
            </ul>
          </li>
       
        </ul>
      </div>

    </nav>
  </header>
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
      <!-- Sidebar user panel -->
      <div class="user-panel">
        <div class="pull-left image">
          <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
        </div>
        <div class="pull-left info">
          <p class='name_holder'>Customer Name</p>
          <span><i class="fa fa-circle text-success"></i> Online</span>
        </div>
      </div>
  
      <!-- /.search form -->
      <!-- sidebar menu: : style can be found in sidebar.less -->
   <ul class="sidebar-menu">
        <li class="header">MAIN NAVIGATION</li>
        <li>
          <a href="imeter_profile.html">
            <i class="fa fa-area-chart"></i> <span>Statistics</span>
           </a>
        </li>
        <li><a href="charts.html"><i class="fa fa-pie-chart text-red"></i> <span>Useage Chart</span> 
     </a></li>
        <li><a href="orders.html"><i class="fa fa-hourglass-2 text-yellow"></i> <span>History</span>  </a></li>
        <li><a href="settings.html"><i class="fa fa-wrench text-pink"></i> <span>Settings</span>   <small class="label pull-right bg-green">here</small></a></li>
        <li><a href="information.html"><i class="fa fa-map-signs text-aqua"></i> <span>Information</span></a></li>
       </ul>
    </section>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Imeter 
        <small>Proto</small>
      </h1>
    </section>

    <!-- Main content -->
		<hr/>
			<hr/>
			<hr/>
			<hr/>
    <section class="content">
    <div id='info'></div>  <!-- Info boxes -->

      <h2 class="page-header">iMeter Information</h2>

      <div class="row">
        <div class="col-md-6">
          <!-- Custom Tabs -->
          <div class="nav-tabs-custom">
            <ul class="nav nav-tabs">
              <li class="active"><a href="#tab_1" data-toggle="tab">About</a></li>
              <li><a href="#tab_2" data-toggle="tab">Help/FAQ</a></li>
              <li><a href="#tab_3" data-toggle="tab">Contact Us</a></li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="tab_1">
                <h3>About Us</h3>

                <p>iMeter is a product of Fedironics Institute of Research (FIRE) and this mobile app functions as a controller of the imeter</p>
              The iMeter was designed to enable easy accurate and intelligent monitoring of electricity useage without stress in order to remove dependency 
on physical reading of meter which is very tasking and tedious. With this mobile app the user can impact any change on his meter easily and quickly . The iMeter has many 
advantages , You can pay for your power bills with your mobile phones , iMeter or Website without the stress of having to go out to pay for bills			  </div>
              <!-- /.tab-pane -->
              <div class="tab-pane" id="tab_2">         
                  <h3>Help /FAQ</h3>

                <p>Using the iMeter is quite easy we have four menus where statistic tells you information about your energy balance and how you are using your energy,</p>
           Charts tells you what time of the day you use your energy more if it is in the early morning(12am-6am) or morning(6am-12pm) or afternoon(12pm-6pm) or night (6pm-12am) .     <!-- /.tab-pane -->
         the history page tells you about all the previous transactions you have carried out on your iMeter account. The settings page which is one of the most important pages gives you
		 options of setting your energy budget, recharging your meter based on topup code and also the option of turning off power in your house from any location
          </div>    <!-- /.tab-pane -->
              <div class="tab-pane" id="tab_3">
   <h3>Contact Us</h3>
      Fedironics Institute Of Research (FIRE)
	  
	  <dl>
                <dt>Website</dt>
                <dd>fedironics.com</dd>
             </dl>
			</div>
              <!-- /.tab-pane -->
            </div>
            <!-- /.tab-content -->
          </div>
          <!-- nav-tabs-custom -->
        </div>
        <!-- /.col -->

        <!-- /.col -->
      </div>
      <!-- /.row -->
  
      <!-- /.row -->
      <!-- Main row -->
   </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <footer class="main-footer">
    <div class="pull-right hidden-xs">
      <b>Version</b> 2.3.2
    </div>
    <strong>Copyright &copy; 2014-2015 <a href="http://imeter.org">Fedironics Institute Of Research</a>.</strong> All rights
    reserved.
  </footer>


</div>
<!-- ./wrapper -->

        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>		
<!-- jQuery 2.1.4 -->
<script src="plugins/jQuery/jQuery-2.1.4.min.js"></script>
<!-- Bootstrap 3.3.5 -->
<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/app.min.js"></script>
<!-- Sparkline -->
<script src="plugins/sparkline/jquery.sparkline.min.js"></script>
<!-- ChartJS 1.0.1 -->
<script src="plugins/chartjs/Chart.min.js"></script>

<script src="plugins/ionslider/ion.rangeSlider.min.js"></script>

<script src="dist/js/demo.js"></script>
<script>
//this script is for all the major actions that this page is going to be dealing with

$(document).ready(function(){
var imeterid=localStorage.getItem('imeterid');
var imetertoken=localStorage.getItem('imetertoken');
var username= localStorage.getItem('username');

$(".name_holder").html(username);
$('#set_budget').click(function(){
var bb=$('#range_5').val();

$.post('http://localhost/imeter/mobile/set_budget.php',{imeterid:imeterid,imetertoken:imetertoken,e_budget:bb},function(data){
var mssg="<div class='alert alert-info alert-dismissible'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>×</button> <h4><i class='icon fa fa-info'></i>Set Budget Alert!</h4>"+data+".</div>";

$('#info').append(mssg);
})
return false;
})



if(localStorage.getItem("e_conn") === null){
 e_conn='1';
localStorage.setItem('e_conn',e_conn);
}
e_conn=localStorage.getItem("e_conn");
if(e_conn=='1'){
$('#toggle_img').attr('src','images/toggle_on.png');
}else {
$('#toggle_img').attr('src','images/toggle_off.png');

}
$("#toggle_img").click(function(){
if(e_conn=='1'){
e_conn='0';
$('#toggle_img').attr('src','images/toggle_off.png');
}else {
e_conn='1';
$('#toggle_img').attr('src','images/toggle_on.png');

}


})
$('#toggle_conn').click(function(){
localStorage.setItem('e_conn',e_conn);
$.post('http://localhost/imeter/mobile/smart_connect.php',{imeterid:imeterid,imetertoken:imetertoken,status:e_conn},function(data){
var mssg="<div class='alert alert-info alert-dismissible'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>×</button> <h4><i class='icon fa fa-info'></i>Smart Connect Alert!</h4>"+data+".</div>";

$('#info').append(mssg);
})
return false;
})


var naira=    $("#range_5").ionRangeSlider({
      min: 1000,
      max: 10000,
      type: 'single',
      step: 25,	  
      from: 5000,
      postfix: " Naira",
      prettify: false,
      hasGrid: true ,
	 
    });

	
	
	
	
	
	
	$('#topup').click(function(){
	var topupCode=$('#topupcode').val();
	if(topupCode.length>5) {
	
	
var theReq=$.post('http://localhost/imeter/process/topup.php',{imeterid:imeterid,imetertoken:imetertoken,topup_code:topupCode},function(data){
var mssg="<div class='alert alert-info alert-dismissible'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>×</button> <h4><i class='icon fa fa-info'></i>Topup Code Alert!</h4>"+data+".</div>";
$('#info').append(mssg);
}); }
else {
var mssg="<div class='alert alert-info alert-dismissible'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>×</button> <h4><i class='icon fa fa-info'></i>Topup Code Alert!</h4>The topup code seems incomplete.</div>";
$('#info').append(mssg);

}
return false;
	})
})
</script>
<script>
//this long set of code is for the image saving from the server--++DAvidity ===____ game!!!
function capturePhoto() {
    sessionStorage.removeItem('imagepath');
    // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50, destinationType: Camera.DestinationType.FILE_URI });
}

function onPhotoDataSuccess(imageURI) { 
        // Uncomment to view the base64 encoded image data
        // console.log(imageData);

        // Get image handle
        //
        var imgProfile = document.getElementById('imgProfile');

        // Show the captured photo
        // The inline CSS rules are used to resize the image
        //
        imgProfile.src = imageURI;
        if(sessionStorage.isprofileimage==1){
            getLocation();
        }
        movePic(imageURI);
}

// Called if something bad happens.
// 
function onFail(message) {
    alert('Failed because: ' + message);
}

function movePic(file){ 
    window.resolveLocalFileSystemURI(file, resolveOnSuccess, resOnError); 
} 

//Callback function when the file system uri has been resolved
function resolveOnSuccess(entry){ 
    var d = new Date();
    var n = d.getTime();
    //new file name
    var newFileName = n + ".jpg";
    var myFolderApp = "ImeterFolder";

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSys) {      
    //The folder is created if doesn't exist
    fileSys.root.getDirectory( ImeterFolder,
                    {create:true, exclusive: false},
                    function(directory) {
                        entry.moveTo(directory, newFileName,  successMove, resOnError);
                    },
                    resOnError);
                    },
    resOnError);
}

//Callback function when the file has been moved successfully - inserting the complete path
function successMove(entry) {
    //Store imagepath in session for future use
    // like to store it in database
    sessionStorage.setItem('imagepath', entry.fullPath);
}

function resOnError(error) {
    alert(error.code);
}
</script>


     <script type="text/javascript">
            app.initialize();
        </script>
</body>
</html>
